# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Backend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è CashStream

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã](#–æ–±–∑–æ—Ä-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã)
2. [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
3. [–°–ª–æ–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è](#—Å–ª–æ–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
4. [–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö](#—Ç–∏–ø—ã-–¥–∞–Ω–Ω—ã—Ö)
5. [–ü–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞](#–ø–æ—Ç–æ–∫-–æ–±—Ä–∞–±–æ—Ç–∫–∏-–∑–∞–ø—Ä–æ—Å–∞)
6. [–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](#–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)
7. [API Endpoints](#api-endpoints)
8. [–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞](#—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ-–ø—Ä–æ–µ–∫—Ç–∞)

---

## üèóÔ∏è –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Å—Ç—Ä–æ–µ–Ω–æ –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É **–º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (Layered Architecture)** —Å —á–µ—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         HTTP Request (Express)          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Routes Layer                    ‚îÇ  ‚Üê –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
‚îÇ  (–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è, –≤–∞–ª–∏–¥–∞—Ü–∏—è)            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Controllers Layer               ‚îÇ  ‚Üê –û–±—Ä–∞–±–æ—Ç–∫–∞ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ  (–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ)       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Models Layer                    ‚îÇ  ‚Üê –†–∞–±–æ—Ç–∞ —Å –ë–î
‚îÇ  (CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏, –∑–∞–ø—Ä–æ—Å—ã)               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                  ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Database (MySQL)                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ config/              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ database.ts      # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
‚îÇ
‚îú‚îÄ‚îÄ constants/           # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ categories.ts    # –°–∏—Å—Ç–µ–º–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
‚îÇ
‚îú‚îÄ‚îÄ controllers/         # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã (–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤)
‚îÇ   ‚îú‚îÄ‚îÄ authController.ts
‚îÇ   ‚îú‚îÄ‚îÄ operationController.ts
‚îÇ   ‚îú‚îÄ‚îÄ budgetController.ts
‚îÇ   ‚îú‚îÄ‚îÄ goalController.ts
‚îÇ   ‚îú‚îÄ‚îÄ categoryController.ts
‚îÇ   ‚îú‚îÄ‚îÄ debtController.ts
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ middleware/          # Middleware —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ auth.ts          # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (JWT)
‚îÇ   ‚îú‚îÄ‚îÄ currency.ts      # –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∞–ª—é—Ç
‚îÇ   ‚îî‚îÄ‚îÄ errorHandler.ts  # –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
‚îÇ
‚îú‚îÄ‚îÄ models/              # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (—Ä–∞–±–æ—Ç–∞ —Å –ë–î)
‚îÇ   ‚îú‚îÄ‚îÄ User.ts
‚îÇ   ‚îú‚îÄ‚îÄ Operation.ts
‚îÇ   ‚îú‚îÄ‚îÄ Budget.ts
‚îÇ   ‚îú‚îÄ‚îÄ Goal.ts
‚îÇ   ‚îú‚îÄ‚îÄ Category.ts
‚îÇ   ‚îú‚îÄ‚îÄ Debt.ts
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ routes/              # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–æ—É—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ authRoutes.ts
‚îÇ   ‚îú‚îÄ‚îÄ operationRoutes.ts
‚îÇ   ‚îú‚îÄ‚îÄ budgetRoutes.ts
‚îÇ   ‚îú‚îÄ‚îÄ goalRoutes.ts
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ services/            # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îî‚îÄ‚îÄ telegramService.ts
‚îÇ
‚îú‚îÄ‚îÄ types/               # TypeScript —Ç–∏–ø—ã
‚îÇ   ‚îú‚îÄ‚îÄ database.ts      # –¢–∏–ø—ã —Ç–∞–±–ª–∏—Ü –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ api.ts           # –¢–∏–ø—ã API –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ dto.ts           # Data Transfer Objects
‚îÇ   ‚îî‚îÄ‚îÄ express.d.ts     # –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ Express —Ç–∏–ø–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ utils/               # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ currencies.ts
‚îÇ   ‚îú‚îÄ‚îÄ emailService.ts
‚îÇ   ‚îú‚îÄ‚îÄ smsService.ts
‚îÇ   ‚îî‚îÄ‚îÄ responseFormatter.ts
‚îÇ
‚îî‚îÄ‚îÄ index.ts             # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
```

---

## üéØ –°–ª–æ–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 1. Routes Layer (–°–ª–æ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ API –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ middleware

**–ü—Ä–∏–Ω—Ü–∏–ø—ã**:
- –¢–æ–ª—å–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–æ–≤
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ middleware (auth, validation)
- –ú–∏–Ω–∏–º—É–º –ª–æ–≥–∏–∫–∏

**–ü—Ä–∏–º–µ—Ä**:
```typescript
// src/routes/operationRoutes.ts
router.use(protect); // Middleware –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
router.get('/', getOperations);
router.post('/', createOperation);
```

### 2. Controllers Layer (–°–ª–æ–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –û–±—Ä–∞–±–æ—Ç–∫–∞ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤, –≤–∞–ª–∏–¥–∞—Ü–∏—è, –≤—ã–∑–æ–≤ –º–æ–¥–µ–ª–µ–π

**–ü—Ä–∏–Ω—Ü–∏–ø—ã**:
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –í—ã–∑–æ–≤ –º–æ–¥–µ–ª–µ–π/—Å–µ—Ä–≤–∏—Å–æ–≤
- –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (DTO ‚Üí Model ‚Üí DTO)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ü—Ä–∏–º–µ—Ä**:
```typescript
// src/controllers/operationController.ts
export const createOperation = async (req: Request, res: Response) => {
  try {
    const opData: OperationCreateDTO = {
      ...req.body,
      userId: req.user?.id || ''
    };
    const op = await Operation.create(opData);
    res.status(201).json({ success: true, data: op });
  } catch (err) {
    res.status(400).json({ success: false, message: err.message });
  }
};
```

### 3. Models Layer (–°–ª–æ–π –º–æ–¥–µ–ª–µ–π)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö, CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏

**–ü—Ä–∏–Ω—Ü–∏–ø—ã**:
- –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- –¢–∏–ø–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (DB ‚Üí Model)
- SQL –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ connection pool

**–ü—Ä–∏–º–µ—Ä**:
```typescript
// src/models/Operation.ts
class OperationModel {
  static async create(data: OperationCreateDTO): Promise<OperationTable> {
    const id = uuidv4();
    await pool.execute(
      'INSERT INTO operations (...) VALUES (...)',
      [...]
    );
    return { ...data, id };
  }
}
```

### 4. Services Layer (–°–ª–æ–π —Å–µ—Ä–≤–∏—Å–æ–≤)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏

**–ü—Ä–∏–Ω—Ü–∏–ø—ã**:
- –°–ª–æ–∂–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (Telegram, Email, SMS)
- –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –ª–æ–≥–∏–∫–∞

**–ü—Ä–∏–º–µ—Ä**:
```typescript
// src/services/telegramService.ts
export const initializeTelegramBot = () => {
  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram –±–æ—Ç–∞
};
```

---

## üìä –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∏–ø—ã —Ç–∞–±–ª–∏—Ü –ë–î (`src/types/database.ts`)

–û–ø—Ä–µ–¥–µ–ª—è—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:

```typescript
export interface OperationTable {
  id: string;
  userId: string;
  title: string | null;
  type: OperationType;
  amount: number;
  // ...
}
```

### –¢–∏–ø—ã API (`src/types/api.ts`)

–û–ø—Ä–µ–¥–µ–ª—è—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤ API:

```typescript
export interface CreateOperationRequest {
  title: string;
  amount: number;
  type: OperationType;
  // ...
}

export interface OperationDTO {
  id: string;
  title: string;
  amount: number;
  // ...
}
```

### DTO (`src/types/dto.ts`)

–û–±—ä–µ–∫—Ç—ã –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Å–ª–æ—è–º–∏:

```typescript
export interface OperationCreateDTO {
  title: string;
  amount: number;
  userId: string;
  // ...
}
```

---

## üîÑ –ü–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞

```
1. HTTP Request
   ‚Üì
2. Express Middleware (cors, morgan, json parser)
   ‚Üì
3. Route Middleware (currency, auth)
   ‚Üì
4. Route Handler
   ‚Üì
5. Controller
   ‚îú‚îÄ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   ‚îú‚îÄ –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ Request ‚Üí DTO
   ‚îú‚îÄ –í—ã–∑–æ–≤ Model/Service
   ‚îî‚îÄ –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ Model ‚Üí Response DTO
   ‚Üì
6. Model
   ‚îú‚îÄ –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ DTO ‚Üí SQL
   ‚îú‚îÄ –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞
   ‚îî‚îÄ –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ SQL ‚Üí Model
   ‚Üì
7. Database
   ‚Üì
8. Response
   ‚Üì
9. Error Handler (–µ—Å–ª–∏ –æ—à–∏–±–∫–∞)
```

---

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü—ã

1. **users** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
2. **operations** - –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
3. **categories** - –ö–∞—Ç–µ–≥–æ—Ä–∏–∏
4. **subcategories** - –ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏
5. **budgets** - –ë—é–¥–∂–µ—Ç—ã
6. **goals** - –¶–µ–ª–∏
7. **debts** - –î–æ–ª–≥–∏
8. **email_verifications** - –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è email
9. **phone_verifications** - –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞
10. **telegram_auth_sessions** - –°–µ—Å—Å–∏–∏ Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### –°—Ö–µ–º—ã —Ç–∞–±–ª–∏—Ü

–ü–æ–¥—Ä–æ–±–Ω—ã–µ —Å—Ö–µ–º—ã –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü –æ–ø–∏—Å–∞–Ω—ã –≤ `src/types/database.ts`

---

## üåê API Endpoints

### Operations (`/api/operations`)

- `GET /api/operations` - –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–π
- `POST /api/operations` - –°–æ–∑–¥–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é
- `GET /api/operations/:id` - –ü–æ–ª—É—á–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é
- `PUT /api/operations/:id` - –û–±–Ω–æ–≤–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é
- `DELETE /api/operations/:id` - –£–¥–∞–ª–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é
- `GET /api/operations/balance` - –ü–æ–ª—É—á–∏—Ç—å –±–∞–ª–∞–Ω—Å
- `POST /api/operations/batch` - –°–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–ø–µ—Ä–∞—Ü–∏–π

### Auth (`/api/auth`)

- `POST /api/auth/register/send-code` - –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `POST /api/auth/register/verify` - –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å
- `POST /api/auth/login` - –í–æ–π—Ç–∏
- `GET /api/auth/me` - –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `POST /api/auth/password/reset-request` - –ó–∞–ø—Ä–æ—Å–∏—Ç—å —Å–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è
- `POST /api/auth/password/reset` - –°–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å

### Budgets (`/api/budgets`)

- `GET /api/budgets` - –ü–æ–ª—É—á–∏—Ç—å –±—é–¥–∂–µ—Ç—ã
- `POST /api/budgets` - –°–æ–∑–¥–∞—Ç—å –±—é–¥–∂–µ—Ç
- `GET /api/budgets/:id` - –ü–æ–ª—É—á–∏—Ç—å –±—é–¥–∂–µ—Ç
- `PUT /api/budgets/:id` - –û–±–Ω–æ–≤–∏—Ç—å –±—é–¥–∂–µ—Ç
- `DELETE /api/budgets/:id` - –£–¥–∞–ª–∏—Ç—å –±—é–¥–∂–µ—Ç

### Goals (`/api/goals`)

- `GET /api/goals` - –ü–æ–ª—É—á–∏—Ç—å —Ü–µ–ª–∏
- `POST /api/goals` - –°–æ–∑–¥–∞—Ç—å —Ü–µ–ª—å
- `GET /api/goals/:id` - –ü–æ–ª—É—á–∏—Ç—å —Ü–µ–ª—å
- `PUT /api/goals/:id` - –û–±–Ω–æ–≤–∏—Ç—å —Ü–µ–ª—å
- `DELETE /api/goals/:id` - –£–¥–∞–ª–∏—Ç—å —Ü–µ–ª—å

### Categories (`/api/categories`)

- `GET /api/categories` - –ü–æ–ª—É—á–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `POST /api/categories` - –°–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
- `POST /api/categories/:id/subcategories` - –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—é
- `DELETE /api/categories/:id` - –£–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é

### Debts (`/api/debts`)

- `GET /api/debts` - –ü–æ–ª—É—á–∏—Ç—å –¥–æ–ª–≥–∏
- `POST /api/debts` - –°–æ–∑–¥–∞—Ç—å –¥–æ–ª–≥
- `GET /api/debts/:id` - –ü–æ–ª—É—á–∏—Ç—å –¥–æ–ª–≥
- `PUT /api/debts/:id` - –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–ª–≥
- `DELETE /api/debts/:id` - –£–¥–∞–ª–∏—Ç—å –¥–æ–ª–≥
- `GET /api/debts/overdue` - –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –¥–æ–ª–≥–∏

---

## üöÄ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞

1. **–°–æ–∑–¥–∞—Ç—å —Ç–∏–ø—ã** (`src/types/api.ts`):
```typescript
export interface CreateNewEntityRequest {
  field1: string;
  field2: number;
}
```

2. **–°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å** (`src/models/NewEntity.ts`):
```typescript
export interface INewEntity {
  id?: string;
  field1: string;
  field2: number;
}

class NewEntityModel {
  static async create(data: INewEntity) { ... }
}
```

3. **–°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä** (`src/controllers/newEntityController.ts`):
```typescript
export const createNewEntity = async (req: Request, res: Response) => {
  // –õ–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è
};
```

4. **–°–æ–∑–¥–∞—Ç—å —Ä–æ—É—Ç—ã** (`src/routes/newEntityRoutes.ts`):
```typescript
router.post('/', protect, createNewEntity);
```

5. **–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–æ—É—Ç—ã** (`src/index.ts`):
```typescript
app.use('/api/new-entities', newEntityRoutes);
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã

1. **–°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é** (`migrations/XXX_create_new_table.sql`)
2. **–î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø—ã** (`src/types/database.ts`)
3. **–°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å** (`src/models/NewTable.ts`)
4. **–°–æ–∑–¥–∞—Ç—å API —Ç–∏–ø—ã** (`src/types/api.ts`)

---

## üìù –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**: –ö–∞–∂–¥—ã–π —Å–ª–æ–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ—é –∑–∞–¥–∞—á—É
2. **–¢–∏–ø–∏–∑–∞—Ü–∏—è**: –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ TypeScript
3. **DRY (Don't Repeat Yourself)**: –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
4. **SOLID –ø—Ä–∏–Ω—Ü–∏–ø—ã**: –û—Å–æ–±–µ–Ω–Ω–æ Single Responsibility
5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ errorHandler
6. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

- `DB_HOST` - –•–æ—Å—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- `DB_USER` - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ë–î
- `DB_PASSWORD` - –ü–∞—Ä–æ–ª—å –ë–î
- `DB_NAME` - –ò–º—è –ë–î
- `JWT_SECRET` - –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è JWT
- `PORT` - –ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –ë–î](./src/types/database.ts)
- [–¢–∏–ø—ã API](./src/types/api.ts)
- [DTO —Ç–∏–ø—ã](./src/types/dto.ts)

