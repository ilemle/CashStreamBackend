# –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∫–∞—Ç–µ–≥–æ—Ä–∏–π

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ —Ç–∞–±–ª–∏—Ü

–ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü –∏–∑–º–µ–Ω–∏–ª–∞—Å—å:

### –¢–∞–±–ª–∏—Ü–∞ `categories`
- ‚ùå **–£–î–ê–õ–ï–ù–û**: –ø–æ–ª–µ `name` (VARCHAR)
- ‚úÖ **–î–û–ë–ê–í–õ–ï–ù–û**: –ø–æ–ª–µ `nameKey` (VARCHAR, UNIQUE) - –∫–ª—é—á –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- ‚úÖ **–î–û–ë–ê–í–õ–ï–ù–û**: —Ç–∞–±–ª–∏—Ü–∞ `translations` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤

### –¢–∞–±–ª–∏—Ü–∞ `subcategories`
- ‚ùå **–£–î–ê–õ–ï–ù–û**: –ø–æ–ª–µ `name` (VARCHAR)
- ‚úÖ **–î–û–ë–ê–í–õ–ï–ù–û**: –ø–æ–ª–µ `nameKey` (VARCHAR, UNIQUE) - –∫–ª—é—á –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ SQL –∑–∞–ø—Ä–æ—Å–æ–≤

### ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û (—Å—Ç–∞—Ä—ã–π –∑–∞–ø—Ä–æ—Å):
```sql
SELECT id, name FROM categories WHERE isSystem = TRUE
```

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û (–Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å):
```sql
SELECT 
  c.id,
  c.nameKey,
  COALESCE(t.name, c.nameKey) as name
FROM categories c
LEFT JOIN translations t ON t.entityType = 'category' 
  AND t.entityId = c.id 
  AND t.language = 'ru'
WHERE c.isSystem = TRUE
```

## üìù –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

### –í–º–µ—Å—Ç–æ –ø—Ä—è–º—ã—Ö SQL –∑–∞–ø—Ä–æ—Å–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ—Ç–æ–¥—ã –º–æ–¥–µ–ª–∏:

```typescript
import CategoryModel from './models/Category';

// –ü–æ–ª—É—á–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
const categories = await CategoryModel.getSystemCategories('ru');

// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
const allCategories = await CategoryModel.getAllCategoriesWithSubcategories(
  userId, 
  'ru', 
  'expense' // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: 'income' | 'expense'
);
```

## üêõ –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### –û—à–∏–±–∫–∞: `Unknown column 'name' in 'field list'`
**–ü—Ä–∏—á–∏–Ω–∞**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞—Ä—ã–π –∑–∞–ø—Ä–æ—Å —Å –ø–æ–ª–µ–º `name` –≤–º–µ—Å—Ç–æ `nameKey` + JOIN —Å `translations`

**–†–µ—à–µ–Ω–∏–µ**: 
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–µ—Ç–æ–¥—ã `CategoryModel` –≤–º–µ—Å—Ç–æ –ø—Ä—è–º—ã—Ö SQL –∑–∞–ø—Ä–æ—Å–æ–≤
2. –ï—Å–ª–∏ –Ω—É–∂–µ–Ω –ø—Ä—è–º–æ–π SQL, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∑–∞–ø—Ä–æ—Å —Å JOIN (—Å–º. –ø—Ä–∏–º–µ—Ä –≤—ã—à–µ)

### –û—à–∏–±–∫–∞: `Bind parameters must not contain undefined`
**–ü—Ä–∏—á–∏–Ω–∞**: –í SQL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è `undefined` –≤–º–µ—Å—Ç–æ `null`

**–†–µ—à–µ–Ω–∏–µ**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä `??` –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏:
```typescript
const value = data.field ?? null; // undefined -> null
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

–°–º. —Ñ–∞–π–ª `MULTILINGUAL_CATEGORIES.md` –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ.



