# –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞

### –¢–∞–±–ª–∏—Ü—ã

1. **`categories`** - –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ UUID
   - `id` (CHAR(36)) - UUID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
   - `nameKey` (VARCHAR(255)) - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `category.food`)
   - `icon`, `isSystem`, `userId` - –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è

2. **`subcategories`** - –ü–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ UUID
   - `id` (CHAR(36)) - UUID –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏
   - `categoryId` (CHAR(36)) - –°—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏—é
   - `nameKey` (VARCHAR(255)) - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `subcategory.groceries`)
   - `icon` - –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è

3. **`translations`** - –¢–∞–±–ª–∏—Ü–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
   - `id` (CHAR(36)) - UUID –ø–µ—Ä–µ–≤–æ–¥–∞
   - `entityType` (ENUM) - 'category' –∏–ª–∏ 'subcategory'
   - `entityId` (CHAR(36)) - ID –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–ª–∏ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏
   - `language` (VARCHAR(10)) - ISO 639-1 –∫–æ–¥ —è–∑—ã–∫–∞ (ru, en, etc.)
   - `name` (VARCHAR(255)) - –ü–µ—Ä–µ–≤–µ–¥–µ–Ω–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ

## üîë –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ UUID** - –ö–∞–∂–¥–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è –∏ –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π UUID
2. **–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å** - –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —è–∑—ã–∫–∏
3. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è –ª—é–±–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —è–∑—ã–∫–æ–≤
4. **–ì–∏–±–∫–æ—Å—Ç—å** - –ü–µ—Ä–µ–≤–æ–¥—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

## üìù –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å –ø–µ—Ä–µ–≤–æ–¥–æ–º

```sql
-- –ü–æ–ª—É—á–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Å –ø–µ—Ä–µ–≤–æ–¥–æ–º –Ω–∞ —Ä—É—Å—Å–∫–∏–π
SELECT 
  c.id,
  c.nameKey,
  c.icon,
  COALESCE(t.name, c.nameKey) as name
FROM categories c
LEFT JOIN translations t ON t.entityType = 'category' 
  AND t.entityId = c.id 
  AND t.language = 'ru'
WHERE c.id = '550e8400-e29b-41d4-a716-446655440001';
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏

```sql
SELECT 
  c.id,
  c.nameKey,
  c.icon,
  c.isSystem,
  COALESCE(t.name, c.nameKey) as name
FROM categories c
LEFT JOIN translations t ON t.entityType = 'category' 
  AND t.entityId = c.id 
  AND t.language = 'ru'
WHERE c.isSystem = TRUE OR c.userId = ?
ORDER BY c.nameKey;
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞

```sql
INSERT INTO translations (id, entityType, entityId, language, name) VALUES
(UUID(), 'category', '550e8400-e29b-41d4-a716-446655440001', 'de', 'Essen & Getr√§nke')
ON DUPLICATE KEY UPDATE name=VALUES(name);
```

## üåç –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —è–∑—ã–∫–∏

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è:
- `ru` - –†—É—Å—Å–∫–∏–π
- `en` - –ê–Ω–≥–ª–∏–π—Å–∫–∏–π

–ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª—é–±–æ–π —è–∑—ã–∫ –ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É ISO 639-1:
- `de` - –ù–µ–º–µ—Ü–∫–∏–π
- `fr` - –§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π
- `es` - –ò—Å–ø–∞–Ω—Å–∫–∏–π
- –∏ —Ç.–¥.

## üîß API –∏–∑–º–µ–Ω–µ–Ω–∏—è

–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —á–µ—Ä–µ–∑ API –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `language`:

```
GET /api/categories?language=ru
GET /api/categories?language=en
```

–ï—Å–ª–∏ —è–∑—ã–∫ –Ω–µ —É–∫–∞–∑–∞–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —è–∑—ã–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (ru) –∏–ª–∏ nameKey.

## üìä –ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö

```json
{
  "id": "550e8400-e29b-41d4-a716-446655440001",
  "nameKey": "category.food",
  "name": "–ï–¥–∞ –∏ –Ω–∞–ø–∏—Ç–∫–∏", // –∏–∑ translations –¥–ª—è —è–∑—ã–∫–∞ 'ru'
  "icon": "restaurant",
  "isSystem": true,
  "subcategories": [
    {
      "id": "660e8400-e29b-41d4-a716-446655440001",
      "nameKey": "subcategory.groceries",
      "name": "–ü—Ä–æ–¥—É–∫—Ç—ã", // –∏–∑ translations –¥–ª—è —è–∑—ã–∫–∞ 'ru'
      "icon": null
    }
  ]
}
```

