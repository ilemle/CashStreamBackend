# Swagger API Documentation

## –û–±–∑–æ—Ä

CashStream API –∏–º–µ–µ—Ç –ø–æ–ª–Ω—É—é Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –∏–∑—É—á–∞—Ç—å –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã.

## –î–æ—Å—Ç—É–ø –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Swagger UI
–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `http://localhost:3000/api-docs`

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:
- ‚úÖ **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ API –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- ‚úÖ **JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É "Authorize" –¥–ª—è –≤—Ö–æ–¥–∞
- ‚úÖ **–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤** - –≥–æ—Ç–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞
- ‚úÖ **–°—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö** - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π –¥–∞–Ω–Ω—ã—Ö

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
```bash
cd backendCashStream
yarn dev
```

### 2. –û—Ç–∫—Ä–æ–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
–ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:3000/api-docs`

### 3. –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"Authorize"** –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
2. –í–≤–µ–¥–∏—Ç–µ JWT —Ç–æ–∫–µ–Ω –≤ —Ñ–æ—Ä–º–∞—Ç–µ: `Bearer your-jwt-token-here`
3. –ù–∞–∂–º–∏—Ç–µ **"Authorize"**

### 4. –ü–æ–ª—É—á–∏—Ç–µ JWT —Ç–æ–∫–µ–Ω
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç `/auth/login` –∏–ª–∏ `/auth/register/verify` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞.

## –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (`/auth`)
- `POST /auth/register/send-code` - –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥ –Ω–∞ email
- `POST /auth/register/verify` - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø–æ email
- `POST /auth/login` - –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
- `GET /auth/me` - –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ (`/categories`)
- `GET /categories` - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
- `POST /categories` - –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
- `POST /categories/{id}/subcategories` - –°–æ–∑–¥–∞—Ç—å –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—é
- `DELETE /categories/{id}` - –£–¥–∞–ª–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
- `DELETE /categories/subcategories/{id}` - –£–¥–∞–ª–∏—Ç—å –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏—é

### üí∞ –û–ø–µ—Ä–∞—Ü–∏–∏ (`/operations`)
- `GET /operations` - –ü–æ–ª—É—á–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- `POST /operations` - –°–æ–∑–¥–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é
- `POST /operations/batch` - –°–æ–∑–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–ø–µ—Ä–∞—Ü–∏–π
- `GET /operations/balance` - –ü–æ–ª—É—á–∏—Ç—å –±–∞–ª–∞–Ω—Å
- `GET /operations/{id}` - –ü–æ–ª—É—á–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é –ø–æ ID
- `PUT /operations/{id}` - –û–±–Ω–æ–≤–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é
- `DELETE /operations/{id}` - –£–¥–∞–ª–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é

### üíµ –ë—é–¥–∂–µ—Ç—ã (`/budgets`)
- `GET /budgets` - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –±—é–¥–∂–µ—Ç—ã
- `POST /budgets` - –°–æ–∑–¥–∞—Ç—å –±—é–¥–∂–µ—Ç
- `PUT /budgets/{id}` - –û–±–Ω–æ–≤–∏—Ç—å –±—é–¥–∂–µ—Ç
- `DELETE /budgets/{id}` - –£–¥–∞–ª–∏—Ç—å –±—é–¥–∂–µ—Ç

### üéØ –¶–µ–ª–∏ (`/goals`)
- `GET /goals` - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ü–µ–ª–∏
- `POST /goals` - –°–æ–∑–¥–∞—Ç—å —Ü–µ–ª—å
- `PUT /goals/{id}` - –û–±–Ω–æ–≤–∏—Ç—å —Ü–µ–ª—å
- `DELETE /goals/{id}` - –£–¥–∞–ª–∏—Ç—å —Ü–µ–ª—å

### üí± –í–∞–ª—é—Ç—ã (`/currencies`)
- `GET /currencies` - –ü–æ–ª—É—á–∏—Ç—å –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç
- `GET /currencies/convert` - –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–∞–ª—é—Ç—É

### ü§ñ –ò–ò (`/ai`)
- `POST /ai/chat` - –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –ò–ò

### üí¨ –î–æ–ª–≥–∏ (`/debts`)
- `GET /debts` - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –¥–æ–ª–≥–∏
- `POST /debts` - –°–æ–∑–¥–∞—Ç—å –¥–æ–ª–≥
- `PUT /debts/{id}` - –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–ª–≥
- `DELETE /debts/{id}` - –£–¥–∞–ª–∏—Ç—å –¥–æ–ª–≥

### üëë –ê–¥–º–∏–Ω (`/admin`)
- –ê–¥–º–∏–Ω—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```javascript
// 1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥ –Ω–∞ email
POST /auth/register/send-code
{
  "email": "user@example.com"
}

// 2. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
POST /auth/register/verify
{
  "email": "user@example.com",
  "code": "123456",
  "password": "securepassword",
  "firstName": "–ò–≤–∞–Ω",
  "lastName": "–ò–≤–∞–Ω–æ–≤"
}
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
```javascript
POST /operations
Authorization: Bearer your-jwt-token
{
  "title": "–ü–æ–∫—É–ø–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤",
  "amount": -500.50,
  "type": "expense",
  "category": "–ï–¥–∞ –∏ –Ω–∞–ø–∏—Ç–∫–∏",
  "categoryId": 1,
  "currency": "RUB",
  "date": "2024-01-15T10:30:00.000Z"
}
```

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
```javascript
GET /operations?page=1&limit=10&startDate=2024-01-01&endDate=2024-01-31
Authorization: Bearer your-jwt-token
```

## –°—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–æ–¥–µ–ª–∏:
- **User** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∏—Å—Ç–µ–º—ã
- **Category** - –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Ä–∞—Å—Ö–æ–¥–æ–≤/–¥–æ—Ö–æ–¥–æ–≤
- **Operation** - –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
- **Budget** - –ë—é–¥–∂–µ—Ç –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- **Goal** - –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Ü–µ–ª—å
- **Debt** - –î–æ–ª–≥/–∑–∞–µ–º

### –¢–∏–ø—ã –æ–ø–µ—Ä–∞—Ü–∏–π:
- `income` - –î–æ—Ö–æ–¥
- `expense` - –†–∞—Å—Ö–æ–¥
- `transfer` - –ü–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É —Å—á–µ—Ç–∞–º–∏

### –°—Ç–∞—Ç—É—Å—ã –¥–æ–ª–≥–æ–≤:
- `active` - –ê–∫—Ç–∏–≤–Ω—ã–π
- `completed` - –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π
- `cancelled` - –û—Ç–º–µ–Ω–µ–Ω–Ω—ã–π

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

### –ß–µ—Ä–µ–∑ Swagger UI:
1. –û—Ç–∫—Ä–æ–π—Ç–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç
2. –ù–∞–∂–º–∏—Ç–µ **"Try it out"**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
4. –ù–∞–∂–º–∏—Ç–µ **"Execute"**
5. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –æ—Ç–≤–µ—Ç

### –ß–µ—Ä–µ–∑ curl:
```bash
# –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞
curl -X GET "http://localhost:3000/api/categories" \
  -H "Authorization: Bearer your-jwt-token"
```

### –ß–µ—Ä–µ–∑ Postman/Insomnia:
–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é –∏–∑ `/api-docs` –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ç–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã.

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞ 401 Unauthorized
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ JWT —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ Authorization
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–æ–∫–µ–Ω –Ω–µ –∏—Å—Ç–µ–∫ (expires in 30 days)

### –û—à–∏–±–∫–∞ 400 Bad Request
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –≤ –∑–∞–ø—Ä–æ—Å–µ
- –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö

### –û—à–∏–±–∫–∞ 500 Internal Server Error
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∑–∞–ø—É—â–µ–Ω–∞ –∏ –¥–æ—Å—Ç—É–ø–Ω–∞

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:
1. –î–æ–±–∞–≤—å—Ç–µ JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—É –∏–ª–∏ —Ä–æ—É—Ç—É
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç Swagger JSDoc
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### –ü—Ä–∏–º–µ—Ä –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏:
```javascript
/**
 * @swagger
 * /endpoint:
 *   get:
 *     summary: –û–ø–∏—Å–∞–Ω–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞
 *     tags: [TagName]
 *     security:
 *       - bearerAuth: []
 *     responses:
 *       200:
 *         description: –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç
 */
```

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –ø–æ API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫:
- –û—Å–Ω–æ–≤–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏: `API_DOCUMENTATION.md`
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Å–∏—Å—Ç–µ–º—ã: `ARCHITECTURE.md`
- –†—É–∫–æ–≤–æ–¥—Å—Ç–≤—É –ø–æ –±—ã—Å—Ç—Ä–æ–º—É —Å—Ç–∞—Ä—Ç—É: `QUICK_START.md`
